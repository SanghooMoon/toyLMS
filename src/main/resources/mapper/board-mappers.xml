<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">

	<select id="selectBoard" resultMap="boardResult">
		SELECT * FROM board
	</select>
	
	<select id="selectArticle" resultMap="boardResult" >
		SELECT * FROM board WHERE bno=#{bno}
	</select>
	
	<select id="selectListCount" resultType="_int">
		SELECT COUNT(*) FROM BOARD
	</select>
	
	<insert id="insertArticle">
		INSERT INTO BOARD VALUES(BNO_SEQ.NEXTVAL, #{id}, #{title}, #{content}, SYSDATE)
	</insert>
	
	<update id="updateArticle">
		UPDATE board SET content=#{content}, title=#{title}, indate=SYSDATE WHERE bno=#{bno}
	</update>
	
	<delete id="deleteArticle">
		DELETE FROM board WHERE BNO=#{bno}
	</delete>
	
	<insert id="insertReply">
		INSERT INTO reply VALUES(RNO_SEQ.nextval, #{bno}, #{replytext}, #{replyid}, SYSDATE)
	</insert>
	
	<select id="selectReply" resultMap="replyResult">
		select * FROM reply WHERE bno=#{bno}
	</select>
	
	<resultMap type="Article" id="boardResult">
		<id column="bno" property="bno"/>
		<result column="id" property="id"/>
		<result column="title" property="title"/>
		<result column="content" property="content"/>
		<result column="indate" property="indate"/>
	</resultMap>
	
	<resultMap type="Reply" id="replyResult">
		<id column="rno" property="rno"/>
		<result column="bno" property="bno"/>
		<result column="replytext" property="replytext"/>
		<result column="replyid" property="replyid"/>
		<result column="redate" property="redate"/>
	</resultMap>

</mapper>
